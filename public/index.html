<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Welcome to Firebase Hosting</title>
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script src="https://www.gstatic.com/firebasejs/5.5.0/firebase.js"></script>
	<link rel="manifest" href="/manifest.json">
	<script>
	  var config = {
		apiKey: "AIzaSyBAA5Ib-dYSLHC2pBHFU566NAQBcH9yUS8",
		authDomain: "video-notification.firebaseapp.com",
		databaseURL: "https://video-notification.firebaseio.com",
		projectId: "video-notification",
		storageBucket: "video-notification.appspot.com",
		messagingSenderId: "624325475971"
	  };
	  firebase.initializeApp(config);
	  const messaging = firebase.messaging();
	  messaging.usePublicVapidKey('BBuPGXyht4Xeao-S1OhAdo9DdUZ0y3Oa3xF78NvwVcE9Ikkqvstqmz6qGPmKquM8BlDqwH_qa17zWynjar-ctRs');
	  
	  messaging.requestPermission()
		.then(function() {
			messaging.getToken().then(function(currentToken){
				$.ajax({
						  type: "POST",
						  url: "http://localhost:1041/api/client-token",
						  data: JSON.stringify(currentToken),
						  success: function(data, status){
						  },
						  contentType: "application/json; charset=utf-8"
						});
			});
		})

		messaging.onMessage(function(payload) {
			window.location = payload.notification.click_action;
		});
	  
	</script>
  </head>
  <body>
      <h1>Welcome to Firebase Hosting</h1>
  </body>
</html>
